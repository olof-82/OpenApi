<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Live Music Nearby</title>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript" src="js/musicOnline.js"></script>
    </h:head>
    <h:body>
        <h:form>
            <p:growl id="growl" sticky="true" showDetail="true"/>

            <p:wizard widgetVar="wiz" flowListener="#{backingBean.onFlowProcess}">

                <p:tab id="map" title="Map">

                    <p:panel header="VÃ¤lj Din Plats">

                        <h:form>
                            <p:gmap widgetVar="w_gmap" center="55.5708457,13.0180405" zoom="15" type="ROADMAP" style="width:600px;height:400px">
                                <p:ajax event="pointSelect" listener="#{backingBean.onPointSelect}" />
                            </p:gmap>
                        </h:form>
                    </p:panel>
                </p:tab>

                <p:tab id="event" title="Lista">
                    <p:panel header="Lista av Events">

                    </p:panel>
                </p:tab>

                <p:tab id="music" title="Musik">
                    <p:panel header="Musik Online">

                        <p:accordionPanel>
                            <p:tab title="Spotify">

                            </p:tab>
                            <p:tab title="YouTube">

                            </p:tab>
                            <p:tab title="SoundCloud">
                                <script type="text/javascript">
                                    console.log("Yoo hoo");
                                </script>
                            </p:tab>
                        </p:accordionPanel>
                        <script type="text/javascript">

                        </script>
                    </p:panel>
                </p:tab>
            </p:wizard>
        </h:form>
        <script type="text/javascript">
            if (navigator.geolocation) {
                checkGeolocationByHTML5();
            } else {
                checkGeolocationByLoaderAPI(); // HTML5 not supported! Fall back to Loader API.
            }

            function checkGeolocationByHTML5() {
                navigator.geolocation.getCurrentPosition(function(position) {
                    setMapCenter(position.coords.latitude, position.coords.longitude);
                }, function() {
                    checkGeolocationByLoaderAPI(); // Error! Fall back to Loader API.
                });
            }

            function checkGeolocationByLoaderAPI() {
                if (google.loader.ClientLocation) {
                    setMapCenter(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
                } else {
                    // Unsupported! Show error/warning?
                }
            }

            function setMapCenter(latitude, longitude) {
                w_gmap.getMap().setCenter(new google.maps.LatLng(latitude, longitude));
            }
        </script>
    </h:body>
</html>

